<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AWS Certification Practice Tests</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes slideDown { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes slideUp { from { opacity: 0; transform: translateY(50px); } to { opacity: 1; transform: translateY(0); } }
        .animate-slide-down { animation: slideDown 0.3s ease-out; }
        .animate-slide-up { animation: slideUp 0.6s ease-out; }
        .option-hover:hover { transform: translateX(5px); }
        .cert-card {
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
        }
        .cert-card:hover {
            transform: translateY(-16px) scale(1.03);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.4);
        }
    </style>
</head>
<body class="bg-gradient-to-br from-indigo-600 via-purple-700 to-pink-600 min-h-screen">
    <div id="app" class="container mx-auto px-4 py-6 max-w-7xl"></div>

    <script>
        const certificationQuestions = {
            "AWS Certified Cloud Practitioner (CLF-C02)": [
                { q: "What is the AWS shared responsibility model?", options: ["AWS manages everything", "Customer manages everything", "AWS manages security OF the cloud, customer manages security IN the cloud", "Shared equally"], answer: 2, explanation: "AWS is responsible for security OF the cloud, customers for security IN the cloud." },
                { q: "Which service is object storage?", options: ["EBS", "S3", "EFS", "RDS"], answer: 1, explanation: "Amazon S3 is object storage." },
                { q: "Which pricing model gives up to 72% savings?", options: ["On-Demand", "Spot", "Savings Plans", "Reserved Instances"], answer: 2, explanation: "Savings Plans offer the highest flexibility and savings." }
            ],
            "AWS Certified Solutions Architect – Associate (SAA-C03)": [
                { q: "Which service provides a managed NAT gateway?", options: ["Internet Gateway", "NAT Gateway", "VPC Endpoint", "Egress-only IGW"], answer: 1, explanation: "NAT Gateway allows instances in private subnets to access the internet." },
                { q: "What is the most durable storage in AWS?", options: ["EBS", "Instance Store", "S3", "Glacier"], answer: 2, explanation: "S3 offers 11 9's durability." },
                { q: "Which service auto-scales EC2 instances?", options: ["Auto Scaling Group", "ELB", "CloudFront", "Route 53"], answer: 0, explanation: "Auto Scaling Groups manage instance scaling." }
            ],
            "AWS Certified Developer – Associate (DVA-C02)": [
                { q: "Which service runs code without servers?", options: ["EC2", "Lambda", "ECS", "EKS"], answer: 1, explanation: "AWS Lambda is serverless compute." },
                { q: "What is the maximum Lambda execution time?", options: ["5 min", "15 min", "30 min", "1 hour"], answer: 1, explanation: "Lambda functions can run up to 15 minutes." },
                { q: "Which service is a fully managed message queue?", options: ["SNS", "SQS", "EventBridge", "Kinesis"], answer: 1, explanation: "Amazon SQS is a message queue service." }
            ],
            "AWS Certified SysOps Administrator – Associate (SOA-C02)": [
                { q: "Which service monitors resources and sets alarms?", options: ["CloudTrail", "CloudWatch", "Config", "Trusted Advisor"], answer: 1, explanation: "Amazon CloudWatch is used for monitoring and alarms." },
                { q: "Which service logs API calls?", options: ["CloudWatch", "CloudTrail", "X-Ray", "Inspector"], answer: 1, explanation: "AWS CloudTrail logs all API activity." },
                { q: "How do you get operational recommendations?", options: ["CloudWatch", "Trusted Advisor", "Inspector", "GuardDuty"], answer: 1, explanation: "AWS Trusted Advisor provides best practice checks." }
            ],
            "AWS Certified DevOps Engineer – Professional (DOP-C03)": [
                { q: "Which service orchestrates CI/CD pipelines?", options: ["CodeBuild", "CodeDeploy", "CodePipeline", "CodeStar"], answer: 2, explanation: "AWS CodePipeline automates release pipelines." },
                { q: "What is infrastructure as code?", options: ["CloudFormation", "Elastic Beanstalk", "OpsWorks", "All of the above"], answer: 3, explanation: "All can be used, but CloudFormation is pure IaC." },
                { q: "Which tool deploys to Lambda automatically?", options: ["SAM", "CDK", "Serverless Framework", "All of the above"], answer: 3, explanation: "All are valid deployment tools." }
            ],
            "AWS Certified Solutions Architect – Professional (SAP-C02)": [
                { q: "What is the most cost-effective for unpredictable workloads?", options: ["Reserved Instances", "Savings Plans", "Spot Instances", "On-Demand"], answer: 2, explanation: "Spot Instances offer up to 90% savings." },
                { q: "Which service provides multi-region active-active?", options: ["Route 53 Latency Routing", "Global Accelerator", "CloudFront", "Direct Connect"], answer: 1, explanation: "AWS Global Accelerator improves availability and performance." },
                { q: "What is the best disaster recovery strategy with RPO < 1 min?", options: ["Pilot Light", "Warm Standby", "Multi-Site Active/Active", "Backup & Restore"], answer: 2, explanation: "Multi-site active/active provides near-zero RPO/RTO." }
            ]
        };

        let selectedCert = null;
        let currentQuestions = [];
        let userAnswers = {};
        let stats = { correct: 0, wrong: 0, answered: 0 };
        let timeLeft = 130 * 60;
        let timerInterval = null;
        let timeUp = false;

        function prepareQuestions(certKey) {
            const allQ = certificationQuestions[certKey];
            const shuffled = [...allQ].sort(() => 0.5 - Math.random());
            currentQuestions = shuffled.length >= 65 ? shuffled.slice(0, 65) : shuffled;
        }

        function startExam(certName) {
            selectedCert = certName;
            prepareQuestions(certName);
            userAnswers = {};
            stats = { correct: 0, wrong: 0, answered: 0 };
            timeLeft = 130 * 60;
            timeUp = false;
            renderExamScreen();
            startTimer();
        }

        function retryExam() {
            // Same as startExam but reuse the current selectedCert
            prepareQuestions(selectedCert);
            userAnswers = {};
            stats = { correct: 0, wrong: 0, answered: 0 };
            timeLeft = 130 * 60;
            timeUp = false;
            document.getElementById('resultModal').classList.add('hidden');
            renderExamScreen();
            startTimer();
        }

        function startTimer() {
            clearInterval(timerInterval);
            updateTimerDisplay();
            timerInterval = setInterval(() => {
                timeLeft--;
                updateTimerDisplay();
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    timeUp = true;
                    showResults();
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            if (!document.getElementById('timer')) return;
            const m = String(Math.floor(timeLeft / 60)).padStart(2, '0');
            const s = String(timeLeft % 60).padStart(2, '0');
            document.getElementById('timer').textContent = `${m}:${s}`;
        }

        function selectAnswer(qIdx, optIdx) {
            if (timeUp || userAnswers[qIdx] !== undefined) return;
            const q = currentQuestions[qIdx];
            const correct = optIdx === q.answer;
            userAnswers[qIdx] = optIdx;
            stats.answered++;
            if (correct) stats.correct++;
            else stats.wrong++;
            renderQuestion(qIdx);
            updateStats();
        }

        function updateStats() {
            document.getElementById('correctCount').textContent = stats.correct;
            document.getElementById('wrongCount').textContent = stats.wrong;
            const perc = stats.answered > 0 ? Math.round((stats.correct / stats.answered) * 100) : 0;
            document.getElementById('scorePercent').textContent = perc + '%';
            document.getElementById('progressText').textContent = stats.answered + '/' + currentQuestions.length;
            document.getElementById('progressFill').style.width = (stats.answered / currentQuestions.length) * 100 + '%';
        }

        function renderQuestion(idx) {
            const q = currentQuestions[idx];
            const ans = userAnswers[idx];
            const answered = ans !== undefined;
            const correct = answered && ans === q.answer;

            const el = document.getElementById(`question-${idx}`);
            let optionsHTML = '';
            q.options.forEach((opt, i) => {
                const selected = ans === i;
                const isCorrect = q.answer === i;
                let btnClass = 'w-full p-5 rounded-xl transition-all flex items-center gap-4 text-left border-2 ';
                if (answered) {
                    if (isCorrect) btnClass += 'border-green-500 bg-green-50 cursor-not-allowed';
                    else if (selected) btnClass += 'border-red-500 bg-red-50 cursor-not-allowed';
                    else btnClass += 'border-gray-200 bg-gray-50 opacity-60 cursor-not-allowed';
                } else {
                    btnClass += 'border-gray-200 bg-gray-50 hover:border-purple-500 hover:bg-purple-50 cursor-pointer option-hover';
                }
                const labelCls = answered && isCorrect ? 'bg-green-600' : answered && selected ? 'bg-red-600' : 'bg-purple-600';
                const icon = answered && isCorrect ? '<svg class="ml-auto w-7 h-7 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"/></svg>' :
                             answered && selected ? '<svg class="ml-auto w-7 h-7 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M6 18L18 6M6 6l12 12"/></svg>' : '';

                optionsHTML += `<button onclick="selectAnswer(${idx},${i})" class="${btnClass}" ${answered ? 'disabled' : ''}>
                    <div class="w-11 h-11 rounded-full flex items-center justify-center font-bold text-white text-lg ${labelCls}">${String.fromCharCode(65+i)}</div>
                    <span class="text-gray-800 text-lg flex-1">${opt}</span>${icon}
                </button>`;
            });

            let expl = '';
            if (answered) {
                const color = correct ? 'green' : 'red';
                expl = `<div class="mt-6 p-6 rounded-xl border-l-4 bg-${color}-50 border-${color}-500 animate-slide-down">
                    <p class="mb-2 font-semibold text-${color}-700">${correct ? 'Correct!' : 'Incorrect'}</p>
                    <p class="mb-2"><strong>Correct Answer:</strong> ${String.fromCharCode(65+q.answer)}) ${q.options[q.answer]}</p>
                    <p><strong>Explanation:</strong> ${q.explanation}</p>
                </div>`;
            }

            el.innerHTML = `
                <div class="flex items-start gap-5 mb-6">
                    <div class="w-14 h-14 rounded-full bg-gradient-to-br from-purple-600 to-indigo-700 text-white flex items-center justify-center font-bold text-xl flex-shrink-0">${idx+1}</div>
                    <h3 class="text-xl font-semibold text-gray-800 leading-relaxed">${q.q}</h3>
                </div>
                <div class="space-y-4">${optionsHTML}</div>
                ${expl}
            `;
        }

        function renderAllQuestions() {
            const cont = document.getElementById('questionsContainer');
            cont.innerHTML = '';
            currentQuestions.forEach((_, i) => {
                const div = document.createElement('div');
                div.id = `question-${i}`;
                div.className = 'bg-white rounded-2xl shadow-xl p-8 hover:shadow-2xl transition-shadow';
                cont.appendChild(div);
                renderQuestion(i);
            });
        }

        function scrollToNextUnanswered() {
            for (let i = 0; i < currentQuestions.length; i++) {
                if (userAnswers[i] === undefined) {
                    document.getElementById(`question-${i}`).scrollIntoView({ behavior: 'smooth', block: 'center' });
                    return;
                }
            }
            alert('All questions answered!');
        }

        function showResults() {
            clearInterval(timerInterval);
            const percentage = Math.round((stats.correct / currentQuestions.length) * 100);
            document.getElementById('finalScore').textContent = percentage + '%';
            document.getElementById('finalCorrect').textContent = stats.correct;
            document.getElementById('finalWrong').textContent = currentQuestions.length - stats.correct;
            document.getElementById('resultModal').classList.remove('hidden');
            document.getElementById('resultModal').classList.add('flex');
        }

        function backToHome() {
            clearInterval(timerInterval);
            document.getElementById('app').innerHTML = getHomeHTML();
        }

        function renderExamScreen() {
            document.getElementById('app').innerHTML = `
                <div class="bg-white rounded-2xl shadow-2xl p-8 mb-8">
                    <div class="flex justify-between items-center mb-6">
                        <h1 class="text-4xl font-bold text-purple-700">${selectedCert}</h1>
                        <button onclick="backToHome()" class="text-purple-600 hover:underline text-lg font-medium">Back to Certifications</button>
                    </div>
                    <div class="grid grid-cols-2 md:grid-cols-5 gap-5">
                        <div class="bg-gradient-to-br from-purple-600 to-indigo-700 text-white p-5 rounded-xl text-center"><div class="text-3xl font-bold">${currentQuestions.length}</div><div class="text-sm opacity-90">Questions</div></div>
                        <div class="bg-gradient-to-br from-green-500 to-green-600 text-white p-5 rounded-xl text-center"><div class="text-3xl font-bold" id="correctCount">0</div><div class="text-sm opacity-90">Correct</div></div>
                        <div class="bg-gradient-to-br from-red-500 to-red-600 text-white p-5 rounded-xl text-center"><div class="text-3xl font-bold" id="wrongCount">0</div><div class="text-sm opacity-90">Wrong</div></div>
                        <div class="bg-gradient-to-br from-blue-500 to-blue-600 text-white p-5 rounded-xl text-center"><div class="text-3xl font-bold" id="scorePercent">0%</div><div class="text-sm opacity-90">Score</div></div>
                        <div class="bg-gradient-to-br from-yellow-500 to-orange-600 text-white p-5 rounded-xl text-center"><div class="text-3xl font-bold" id="timer">130:00</div><div class="text-sm opacity-90">Time Left</div></div>
                    </div>
                </div>

                <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
                    <div class="flex justify-between mb-3 text-gray-700 font-semibold"><span>Progress</span><span id="progressText">0/${currentQuestions.length}</span></div>
                    <div class="h-6 bg-gray-200 rounded-full overflow-hidden"><div id="progressFill" class="h-full bg-gradient-to-r from-purple-600 to-indigo-700 transition-all duration-500" style="width:0%"></div></div>
                </div>

                <div class="bg-white rounded-xl shadow-lg p-6 mb-10 flex flex-wrap gap-5">
                    <button onclick="scrollToNextUnanswered()" class="flex-1 bg-purple-600 text-white px-8 py-4 rounded-xl font-bold hover:bg-purple-700 transition-all text-lg">Next Unanswered</button>
                    <button onclick="showResults()" class="flex-1 bg-green-600 text-white px-8 py-4 rounded-xl font-bold hover:bg-green-700 transition-all text-lg">Submit & See Results</button>
                </div>

                <div id="questionsContainer" class="space-y-10"></div>

                <!-- Result Modal with Retry Option -->
                <div id="resultModal" class="hidden fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 p-4">
                    <div class="bg-white rounded-3xl p-12 max-w-lg w-full text-center shadow-2xl animate-slide-up">
                        <h2 class="text-5xl font-bold text-purple-700 mb-6">Exam Completed!</h2>
                        <div class="text-9xl font-bold bg-gradient-to-r from-purple-600 to-indigo-700 bg-clip-text text-transparent mb-8" id="finalScore">0%</div>
                        <div class="grid grid-cols-2 gap-10 mb-12">
                            <div class="bg-green-50 p-8 rounded-3xl"><div class="text-6xl font-bold text-green-600" id="finalCorrect">0</div><div class="text-gray-600 text-xl mt-2">Correct</div></div>
                            <div class="bg-red-50 p-8 rounded-3xl"><div class="text-6xl font-bold text-red-600" id="finalWrong">0</div><div class="text-gray-600 text-xl mt-2">Wrong</div></div>
                        </div>
                        <div class="space-y-4">
                            <button onclick="retryExam()" class="w-full bg-gradient-to-r from-purple-600 to-indigo-700 text-white text-xl py-5 rounded-xl font-bold hover:opacity-90 transition-all">
                                Retry This Exam
                            </button>
                            <button onclick="backToHome()" class="w-full bg-gray-600 text-white text-xl py-5 rounded-xl font-bold hover:bg-gray-700 transition-all">
                                Choose Another Certification
                            </button>
                        </div>
                    </div>
                </div>
            `;
            renderAllQuestions();
            updateStats();
        }

        function getHomeHTML() {
            return `
                <div class="text-center py-16">
                    <h1 class="text-6xl md:text-7xl font-bold text-white mb-6 drop-shadow-2xl">AWS Certification Practice Tests</h1>
                    <p class="text-2xl md:text-3xl text-purple-100 mb-20 max-w-4xl mx-auto">Real exam-style questions • 130-minute timer • Instant feedback</p>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-12 max-w-7xl mx-auto px-6">
                        ${Object.keys(certificationQuestions).map(cert => `
                            <div onclick="startExam('${cert}')" class="cert-card bg-white/95 backdrop-blur rounded-3xl shadow-2xl p-10 text-center group">
                                <div class="w-28 h-28 mx-auto mb-8 bg-gradient-to-br from-purple-600 to-indigo-700 rounded-3xl flex items-center justify-center group-hover:scale-110 transition-transform">
                                    <svg class="w-16 h-16 text-white" fill="currentColor" viewBox="0 0 24 24">
                                        <path d="M12 2L2 7v10c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V7l-10-5z"/>
                                    </svg>
                                </div>
                                <h3 class="text-2xl font-bold text-gray-800 mb-2">${cert.split(' (')[0]}</h3>
                                <p class="text-purple-600 font-bold text-xl mb-6">${cert.match(/\((.*?)\)/)[0]}</p>
                                <div class="text-purple-600 font-bold text-xl opacity-0 group-hover:opacity-100 transition-opacity">
                                    Start Practice →
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
        }

        // Initial load
        document.getElementById('app').innerHTML = getHomeHTML();
    </script>
</body>
</html>
